---
title: "時區(GMT, UTC, CST)？時間戳(timestamp)？時間格式(ISO)？時間處理一次看懂"
date: "2022-01-06"

tags:
    - JavaScript
    - timezone

excerpt: "
    時間處理是實務上很常遇到的情況，不論是紀錄log，或是寫一個搶票系統。但剛觸碰時怎麼時區那麼麻煩？
    有 GMT, UTC 又有 CST，三者差在哪？怎麼 ISO 時間格式好奇怪？怎麼前後端時間不一致ＱＱ
    本篇就來了解時間處理的基本概念吧！
    "
---
## 本篇重點

- 介紹 GMT, UTC, CST 時區表示的差異。
- 介紹時間戳(timestamp, epoch)。
- 介紹**標準的時間表示**方法(ISO 表示法)。
- 介紹 JS 原生 `Date` 一些輸出解釋。
- 看一下 JS 時間處理套件 `spacetime` 的厲害。

## 問題背景

- 最近遇到時間同步的功能開發，前端可以透過手動設定時間，也可以要求後端採用 NTP 網路校時。
- 但可能遇到前端時區是莫斯科，但後端是台北。也就是後端時間會比較快。
- 如果產品又有使用者設定排程功能，可能前端設定 10:00 執行，結果前端 07:00 時，排程就開始跑了(因為後端已經到 10:00)。
- 為了避免上述時間不一致的狀況，必須確保前後端時間、時區一致。

## 時間戳(timestamp, epoch)

- 提到時間一致，很難不談時間戳(timestamp 或稱 epoch)。
- 時間戳單位是「毫秒」或「秒」，是從格林威治 `1970-01-01 00:00:00` 開始計算的。
    
    ```jsx
    // 例如 2022-01-01 00:00:00 與 2022-01-01 00:00:00 的 timestamp 相差 1000
    timeA = new Date('2022-01-01 00:00:00')
    timeB = new Date('2022-01-01 00:00:01')
    
    timeB.getTime() - timeA.getTime() // 1000ms
    ```
